<!--
TO DO::
2. Remove Calendar
3. Adding different colours for each user in group calendar
5. User Settings
6. See Users (Integrate Dan's Code)
9. Split into seperate files
Improve::
1. Make sure that all emails in create group are unique
2. draw groups in a better way. they are not looking very beautiful
-->

<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.css">
	<link rel="stylesheet" href="css/jw-jqm-cal.css" />
	<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="js/jquery.mobile-1.4.4.min.js"></script>
	<script type="text/javascript" src="js/jw-jqm-cal.js"></script>
	<script type="text/javascript" src="js/availreport.js"></script>
	<script>
	function isValidDate(d) {
		if ( Object.prototype.toString.call(d) !== "[object Date]" )
			return false;
		return !isNaN(d.getTime());
	}
	function init() {
		document.addEventListener("deviceready", deviceReady, true);
		delete init;
	}

	function refreshPage() {
		jQuery.mobile.changePage(window.location.href, {
			allowSamePageTransition: true,
			transition: 'none',
			reloadPage: true
		});
	}

	$(document).ajaxError(function () {
		alert("No internet or our server is down!!");
	});

	$(document).ready(function () {

		function twoDigits(d) {
			if (0 <= d && d < 10) return "0" + d.toString();
			if (-10 < d && d < 0) return "-0" + (-1 * d).toString();
			return d.toString();
		}

		// To Convert JavaScript Date Object to Mysql format
		Date.prototype.toMysqlFormat = function () {
			return this.getFullYear() + "-" + twoDigits(1 + this.getMonth()) + "-" + twoDigits(this.getDate()) + " " + twoDigits(this.getHours()) + ":" + twoDigits(this.getMinutes()) + ":" + twoDigits(this.getSeconds());
		};

		var user = {
			name: "",
			status: "",
			session: "",
			uid: "",
			email: ""
		};
		var group = {
			gid: "",
			gname: ""
		};
		var personalcalendar = [];
		var availreport = [];

		//If some page fails to load
		$(document).on("pagecontainerloadfailed", function (event, data) {});


		//Login
		$("#submitlogin").click(function (event, data) {
	       
			//jQuery.post( url [, data ] [, success ] [, dataType ] )
			if (!$("#email").val() || !$("#password").val()) {
				alert("Please fill up the details");
			} else {
				user.email = $("#email").val();
				$.mobile.loading('show');
				$.post("http://server8.ies.cse.ohio-state.edu/stacker/login.php", {
					email: $("#email").val(),
					password: $("#password").val()
				},
				function (data) {
					$.mobile.loading('hide');
					var obj = $.parseJSON(data);
					user.name = obj.user;
					user.status = obj.status;
					user.session = obj.session;
					user.uid = obj.uid;

					if (obj.err) {
						alert(obj.err);
						$.mobile.pageContainer.pagecontainer("change", "#login", {
							transition: 'none',
							reloadPage: true
						});
					} else {
						$.mobile.pageContainer.pagecontainer("change", "#mainpage", {
							transition: 'none',
							reloadPage: false
						});
					}
				});
			}
		});

		//Register
		$("#submitreg").click(function () {
			//jQuery.post( url [, data ] [, success ] [, dataType ] )
			$.mobile.loading('show');
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/register.php", {
				name: $("#regname").val(),
				password: $("#regpassword").val(),
				email: $("#regemail").val(),
				phone: $("#regphone").val()
			},
			function (data) {
				$.mobile.loading('hide');
				var obj = $.parseJSON(data);
				if (obj.err) {
					alert(obj.err);
					$.mobile.pageContainer.pagecontainer("change", "#signup", {
						transition: 'none',
						reloadPage: false
					});
				} else {
					alert("Thank you for signing up. Please login to continue");
					$.mobile.pageContainer.pagecontainer("change", "#login", {
						transition: 'none',
						reloadPage: false
					});
				}
			});
		});

		//Check if the user is valid or not Else send to main page
		$(document).on("pagebeforeshow", "#mainpage", function () { // When entering mainpage
			if (!user.name) $.mobile.pageContainer.pagecontainer("change", "#login", {
				transition: 'none',
				reloadPage: false
			});
		});

		//Manage Calendars
		$(document).on("pagebeforeshow","#managecalendars",function(){
			$("#mancalendarlist").empty();

			//Show synced Google Calendars
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/view_calendars.php", {
				session:user.session,
				uid:user.uid
			},
			function(data){
				var calArray = new Array();
				var obj = $.parseJSON(data);
				for (var i = 0; i < obj.length; i += 2) {
					calArray[i] = obj[i];
					calArray[i+1] = obj[i+1];
					$("#mancalendarlist").append("<tr><td>" + calArray[i] + "</td><td><button cid='"+calArray[i+1]+"' class='deleteCalBtn ui-btn ui-btn-corner-all ui-icon-delete ui-btn-icon-notext'></td></tr>");
				}

				//Delete calendar
				$(".deleteCalBtn").click(function(e){
					var cid = $(this).attr("cid");
					$.post("http://server8.ies.cse.ohio-state.edu/stacker/google/delete_calendar.php", {
						session:user.session,
						uid:user.uid,
						cid:cid
					},
					function(data) {
						var deletedCal = $.parseJSON(data);
						alert(deletedCal + " deleted from db.");
						$.mobile.pageContainer.pagecontainer("change", "#refreshmanagecalendars", {
							transition: 'none',
							reloadPage: false
						});
					});
				});

				//Show unsynced Google Calendars
				$.post("http://server8.ies.cse.ohio-state.edu/stacker/google/list_calendars.php", {
					session:user.session,
					uid:user.uid
				},
				function(data) {
					var obj2 = $.parseJSON(data);
					var gCalArray = new Array();
					var i = 0;
					for (var j = 0; j < obj2.length; j += 2) {
						if ($.inArray(obj2[j], calArray) < 0) {
							gCalArray[i] = obj2[j];
							gCalArray[i+1] = obj2[j+1];
							$("#mancalendarlist").append("<tr style='background:#ddd'><td>" + gCalArray[i] + "</td><td><button cid='"+gCalArray[i+1]+"' class='addCalBtn ui-btn ui-btn-corner-all ui-icon-plus ui-btn-icon-notext'></td></tr>");
							i += 2;
						}
					}

					//Add calendar
					$(".addCalBtn").click(function(e){
						var cid = $(this).attr("cid");
						$.post("http://server8.ies.cse.ohio-state.edu/stacker/google/add_calendar.php", {
							session:user.session,
							uid:user.uid,
							cid:cid
						},
						function(data) {
							var addedCal = $.parseJSON(data);
							alert(addedCal + " added to db.");
							$.mobile.pageContainer.pagecontainer("change", "#refreshmanagecalendars", {
								transition: 'none',
								reloadPage: false
							});
						});
					});
				});

				//Synchronize events for calendars
				$("#syncgooglecalendars").click(function () {
					for (var k = 1; k < calArray.length; k += 2) {
						$.post("http://server8.ies.cse.ohio-state.edu/stacker/google/get_events.php", {
							session:user.session,
							uid:user.uid,
							cid:calArray[k]
						},
						function(data) {});
					};
				});
			});
		});
	  
		//Authorize access to Google Calendar
		$("#authgooglecalendar").click(function () {
			window.open("http://server8.ies.cse.ohio-state.edu/stacker/google/auth.php?email=" + user.email, "_system");

			//Refresh manage calendars page
			$.mobile.pageContainer.pagecontainer("change", "#refreshmanagecalendars", {
				transition: 'none',
				reloadPage: false
			});
		});

		// REFRESH MANAGE CALENDARS
		$(document).on("pagebeforeshow", "#refreshmanagecalendars", function () {
			$.mobile.pageContainer.pagecontainer("change", "#managecalendars", {
				transition: 'none',
				reloadPage: false
			});
		});

		//Create Group
		$("#submitcreategroup").click(function () {
			//jQuery.post( url [, data ] [, success ] [, dataType ] )
			//TODO:: Make sure that all emails are unique and not equal to user creating the group
			$.mobile.loading('show');
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/create_group.php", {
				uid: user.uid,
				session: user.session,
				groupname: $("#creategroupname").val(),
				mem1: $("#creategroupmem1").val(),
				mem2: $("#creategroupmem2").val(),
				mem3: $("#creategroupmem3").val(),
				mem4: $("#creategroupmem4").val()
			},
			function (data) {
				$.mobile.loading('hide');
				var obj = $.parseJSON(data);
				alert(obj.err);
				$.mobile.pageContainer.pagecontainer("change", "#mygroups", {
					transition: 'none',
					reloadPage: false
				});
			});
		});

		//My Groups
		$(document).on("pagebeforeshow", "#mygroups", function () {
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/view_groups.php", {
				session: user.session,
				uid: user.uid
			},
			function (data) {
				var obj = $.parseJSON(data);
				$("#viewgroups").empty();
				if (obj.length == 0) {
					alert("You are not part of any groups.");
					$.mobile.pageContainer.pagecontainer("change", "#creategroup", {
						transitiion: 'none',
						reloadPage: false
					});
				}
				for (index = 0; index < obj.length; index = index + 3) {
					var gid = obj[index];
					var gname = obj[index + 1];
					var level = obj[index + 2];
					if (level == 2) {
						var $something = "<div style='border-radius: 3px; border-bottom: solid #ccc;' class='ui-grid-b' gid='" + gid + "'><div class='ui-block-a'><h1>" + gname + "</h1></div></br><div class='ui-block-b'><button gid='" + gid + "' gname='" + gname + "' class='viewgroupcalendarbutton ui-btn ui-btn-corner-all ui-icon-calendar ui-btn-icon-notext'></button></div><div class='ui-block-c'><button gid='" + gid + "' class='leavegroupbutton ui-btn  ui-btn-corner-all ui-icon-delete ui-btn-icon-notext'></button></div></div>";
						$("#viewgroups").append($something);
					} else if (level == 3) {
						var $something = "<div style='border-radius: 3px; border-bottom: solid #ccc;' class='ui-grid-d' gid='" + gid + "'><div class='ui-block-a'><h1>" + gname + "</h1></div></br><div class='ui-block-b'><button gid='" + gid + "' gname='" + gname + "' class='viewgroupcalendarbutton ui-btn  ui-btn-corner-all ui-icon-calendar ui-btn-icon-notext'></button></div><div class='ui-block-c'><button gid='" + gid + "' gname='" + gname + "' class='managegroupbutton ui-btn ui-btn-corner-all ui-icon-edit ui-btn-icon-notext'></button></div><div class='ui-block-d'><button gid='" + gid + "'  gname='" + gname + "' class='generateavailreport ui-btn ui-btn-corner-all ui-icon-grid ui-btn-icon-notext'></button></div><div class='ui-block-e'><button gid='" + gid + "' class='leavegroupbutton ui-btn ui-btn-corner-all ui-icon-delete  ui-btn-icon-notext'></button></div></div>";
						$("#viewgroups").append($something);
					}
				}

				//VIEW GROUP CALENDAR
				$(".viewgroupcalendarbutton").click(function (e, data) {
					group.gid = $(this).attr("gid");
					group.gname = $(this).attr("gname");
					$.mobile.pageContainer.pagecontainer("change", "#view-group-calendar", {
						transitiion: 'none'
					});
				});

				//MANAGE GROUP
				$(".managegroupbutton").click(function () {
					group.gid = $(this).attr("gid");
					group.gname = $(this).attr("gname");
					$.mobile.pageContainer.pagecontainer("change", "#managegroups", {
						transitiion: 'none',
						reloadPage: false
					});
				});

				//VIEW GENERATE AVAIL REPORT FORM
				$(".generateavailreport").click(function () {
					group.gid = $(this).attr("gid");
					group.gname = $(this).attr("gname");
					$.mobile.pageContainer.pagecontainer("change", "#generateavailreportform", {
						transitiion: 'none',
						reloadPage: false
					});
				});

				//LEAVE GROUP
				$(".leavegroupbutton").click(function () {
					$.post("http://server8.ies.cse.ohio-state.edu/stacker/leave_group.php", {
						uid: user.uid,
						gid: $(this).attr("gid")
					},
					function (data) {
						var obj = $.parseJSON(data);
						alert(obj.err);
						$.mobile.pageContainer.pagecontainer("change", "#refreshgroups", {
							transition: 'none',
							reloadPage: false
						});
					});
				});
			});
		});


		//Manage group
		$(document).on("pagebeforeshow", "#managegroups", function () {
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/view_mem.php", {
				session: user.session,
				gid: group.gid
			},
			function (data) {
				var obj = $.parseJSON(data);
				var something;
				$("#groupmembers").empty();
				//users.uid,  users.name , users.email, users.status,group_info.level
				for (index = 0; index < obj.length; index=index + 5) {
					if(obj[index+4]==2) {
						something = "<div class='ui-grid-b' style='border-bottom:3px #ccc;' class='memberswrapper'> <div class='ui-block-a'>" + obj[index+1] +" - "+ obj[index+3]+"</div> <div class='ui-block-b'> <button  usemail="+obj[index+2]+" class='removememberbutton ui-btn ui-btn-inline ui-btn-mini ui-btn-icon-notext ui-icon-forbidden ui-btn-corner-all'/> <button usemail="+obj[index+2]+" class='addcoleaderbutton ui-btn ui-btn-inline ui-btn-mini ui-btn-icon-notext ui-icon-user ui-btn-corner-all'/></div></div><br>";
						$("#groupmembers").append(something);
					} else {
						if(obj[index]==user.uid) {}
						else {
							something = "<div class='ui-grid-b' style='border-bottom:3px #ccc;' class='memberswrapper'> <div class='ui-block-a'>" + obj[index+1] +" - "+ obj[index+3]+"</div> <div class='ui-block-b'> <button usemail="+obj[index+2]+" class='removememberbutton ui-btn ui-btn-inline ui-btn-mini ui-btn-icon-notext ui-icon-forbidden ui-btn-corner-all'/> </div></div><br>";
							$("#groupmembers").append(something);
						}
					}
				}

				//REMOVE MEMBER FROM GROUP
				$(".removememberbutton").click(function () { 
					$.post("http://server8.ies.cse.ohio-state.edu/stacker/delete_member.php", {
						email: $(this).attr("usemail"),
						gid: group.gid
					},
					function (data) {
						var obj = $.parseJSON(data);
						alert(obj.err);
						$.mobile.pageContainer.pagecontainer("change", "#refreshmanagegroups", {
							transition: 'none',
							reloadPage: false
						});
					});
				});

				//ADD CO-LEADER
				$(".addcoleaderbutton").click(function () {
				alert('setcoleader ' +$(this).attr("usemail")) ;
					$.post("http://server8.ies.cse.ohio-state.edu/stacker/set_coleader.php", {
						email: $(this).attr("usemail"),
						gid: group.gid
					},
					function (data) {
						var obj = $.parseJSON(data);
						alert(obj.err);
						$.mobile.pageContainer.pagecontainer("change", "#refreshmanagegroups", {
							transition: 'none',
							reloadPage: false
						});
					});
				});
			});
		});
		
		// REFRESH MANAGE GROUPS
		$(document).on("pagebeforeshow", "#refreshmanagegroups", function () {
			$.mobile.pageContainer.pagecontainer("change", "#managegroups", {
				transition: 'none',
				reloadPage: false
			});
		});
		
		// REFRESH GROUPS
		$(document).on("pagebeforeshow", "#refreshgroups", function () {
			$.mobile.pageContainer.pagecontainer("change", "#mygroups", {
				transition: 'none',
				reloadPage: false
			});
		});

		//NOTIFICATIONS
		$(document).on("pagebeforeshow", "#notifications", function () {
			var numnotifi = 1;
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/group_requests.php", {
				session: user.session,
				uid: user.uid
			},
			function (data) {
				var obj = $.parseJSON(data);
				$("#groupnotifications").empty();
				if (obj.length == 0) {
					numnotifi = 2;
				}
				for (index = 0; index < obj.length; index = index + 2) {
					var gid = obj[index];
					var gname = obj[index + 1];
					var $something = " <div class='ui-grid-b' > <div class='ui-block-a' style='text-align:center'> <h4> Join Group: " + gname + "</h4> </div> <div  class='ui-block-b'> <button class='acceptgroupinvitebutton ui-btn ui-btn-inline ui-mini ui-btn-corner-all ui-icon-check ui-btn-icon-right' groupname='" + gname + "' gid='" + gid + "'>Accept</button> </div> <div class='ui-block-c'> <button class='declinegroupinvitebutton ui-btn ui-btn-inline ui-mini ui-btn-corner-all ui-icon-delete ui-btn-icon-right' groupname='" + gname + "'gid='" + gid + "'>Decline</button> </div></div>";
					$("#groupnotifications").append($something);
				}

				//ACCEPT GROUP INVITATION
				$(".acceptgroupinvitebutton").click(function () {
					var gid = $(this).attr("gid");
					$.post("http://server8.ies.cse.ohio-state.edu/stacker/group_request_response.php", {
						session: user.session,
						uid: user.uid,
						gid: gid,
						response: 1
					},
					function (data) {
						var obj = $.parseJSON(data);
						alert(obj.err);
						$.mobile.pageContainer.pagecontainer("change", "#refreshnotifications", {
							transition: 'none',
							reloadPage: false
						});
					});
				});

				//DECLINE GROUP INVITATION
				$(".declinegroupinvitebutton").click(function () {
					var gid = $(this).attr("gid");
					$.post("http://server8.ies.cse.ohio-state.edu/stacker/group_request_response.php", {
						session: user.session,
						uid: user.uid,
						gid: gid,
						response: 0
					},
					function (data) {
						var obj = $.parseJSON(data);
						alert(obj.err);
						$.mobile.pageContainer.pagecontainer("change", "#refreshnotifications", {
							transition: 'none',
							reloadPage: false
						});
					});
				});
			});

			$.post("http://server8.ies.cse.ohio-state.edu/stacker/meeting_requests.php", {
				uid: user.uid,
			},
			function (data) {
				var obj = $.parseJSON(data);
				if (obj.length == 0) {
					if (numnotifi == 2) {
						alert("no new notifications");
					}
				}
				for (index = 0; index < obj.length; index = index + 4) {
					var mid = obj[index];
					var mname = obj[index + 1];
					var st = obj[index + 2];
					st = new Date(st).toLocaleDateString() + " " + new Date(st).toLocaleTimeString();
					var et = obj[index + 3];
					et = new Date(et).toLocaleDateString() + " " + new Date(et).toLocaleTimeString();
					var gname = mname;
					mname = mname + ": " + st + " to " + et;
					var $something = " <div class='ui-grid-b' > <div class='ui-block-a' style='text-align:center'> <h4>" + mname + "</h4> </div> <div  class='ui-block-b'> <button class='acceptmeetingbutton ui-btn ui-btn-inline ui-mini ui-btn-corner-all ui-icon-check ui-btn-icon-right' mname='" + mname + "' mid='" + mid + "'  st='" + st + "'  et='" + et + "'  gname='" + gname + "'>Accept</button> </div> <div class='ui-block-c'> <button class='declinemeetingbutton ui-btn ui-btn-inline ui-mini ui-btn-corner-all ui-icon-delete ui-btn-icon-right' mname='" + mname + "'mid='" + mid + "'>Decline</button> </div></div>";
					$("#groupnotifications").append($something);
				}

				//ACCEPT MEETING
				$(".acceptmeetingbutton").click(function () {
					var mid = $(this).attr("mid");
					$.post("http://server8.ies.cse.ohio-state.edu/stacker/meeting_request_response.php", {
						session: user.session,
						uid: user.uid,
						mid: mid,
						response: 1
					},
					function (data) {
						var obj = $.parseJSON(data);
						alert(obj.err);	
					});
					
					// Add to google 
					$.post("http://server8.ies.cse.ohio-state.edu/stacker/google/schedule_meeting.php", {
						uid: user.uid,
						st: st,
						et: et,
						notes: gname
					},
					function (data) {
						var obj = $.parseJSON(data);
						alert(obj.err);
						$.mobile.pageContainer.pagecontainer("change", "#refreshnotifications", {
							transition: 'none',
							reloadPage: false
						});
					});
				});

				//DECLINE MEETING
				$(".declinemeetingbutton").click(function () {
					var mid = $(this).attr("mid");
					$.post("http://server8.ies.cse.ohio-state.edu/stacker/meeting_request_response.php", {
						session: user.session,
						uid: user.uid,
						mid: mid,
						response: 0
					},
					function (data) {
						var obj = $.parseJSON(data);
						alert(obj.err);
						$.mobile.pageContainer.pagecontainer("change", "#refreshnotifications", {
							transition: 'none',
							reloadPage: false
						});
					});
				});
			});
		});

		// REFRESH NOTIFICATIONS
		$(document).on("pagebeforeshow", "#refreshnotifications", function () {
			$.mobile.pageContainer.pagecontainer("change", "#notifications", {
				transition: 'none',
				reloadPage: false
			});
		});

		//VIEW PERSONAL CALENDAR
		$(document).on("pagebeforeshow", "#view-calendar", function () {
			$("#calendar").empty();
			var something = "<div id = 'test'> </div> ";
			$("#calendar").append(something);
			personalcalendar = [];
			$.mobile.loading('show');
			$.ajax({
				url: 'http://server8.ies.cse.ohio-state.edu/stacker/retrieve_user_calendar.php',
				data: {
					uid: user.uid
				},
				success: function (data) {
					$.mobile.loading('hide');
					var obj = $.parseJSON(data);
					var length = obj.length
					for (index = 0; index < length; index = index + 4) {
						personalcalendar.push({
							"summary": obj[index + 3].replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, " "),
							"url": obj[index],
							"begin": new Date(obj[index + 1].replace(/-/g, "/")),
							"end": new Date(obj[index + 2].replace(/-/g, "/"))
						});
					}
				},
				async: false
			});

			$("#test").jqmCalendar({
				events: personalcalendar,
				months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
				days: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
				startOfWeek: 0
			});
			$("#test").trigger('refresh');
		});

		// REFRESH PERSONAL CALENDAR
		$(document).on("pagebeforeshow", "#refreshcalendar", function () {
			$.mobile.pageContainer.pagecontainer("change", "#view-calendar", {
				transition: 'none',
				reloadPage: false
			});
		});

		//VIEW GROUP CALENDAR
		$(document).on("pagebeforeshow", "#view-group-calendar", function (e, data) {
			//INPUT IS IF THE FORM - uid,start_time,end_time,event_name
			//TODO: Add colours to calendar based on users
			var groupcalendartable = [];
			var something = "<div id='testing2'> </div>";
			$("#groupcalendar").empty();
			$("#groupcalendar").append(something);
			$.mobile.loading('show');
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/retrieve_group_calendars.php", {
				session: user.session,
				uid: user.uid,
				gid: group.gid
			},
			function (data) {
				$.mobile.loading('hide');
				var obj = $.parseJSON(data);
				var curr_user;
				var i = 0;
				var j = 0;
				var length = obj.length
				for (index = 0; index < length; index = index + 4) {
					groupcalendartable.push({
						"summary": obj[index + 3],
						"begin": new Date(obj[index + 1].replace(/-/g, "/")),
						"end": new Date(obj[index + 2].replace(/-/g, "/"))
					});
				}
			});

			$("#testing2").jqmCalendar({
				events: groupcalendartable,
				months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
				days: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
				startOfWeek: 0
			});
			$("#testing").trigger('refresh');
		});

		//ADD EVENT TO CALENDAR
		$("#addcalendareventbutton").click(function () {
			var eventdesc = $("#caleventdesc").val();
			var eventstarttime = $("#caleventstartdate").val();
			var eventstartdate = $("#caleventstarttime").val();
			var eventendtime = $("#caleventenddate").val();
			var eventenddate = $("#caleventendtime").val();
			var st = eventstarttime + " " + eventstartdate;
			var et = eventendtime + " " + eventenddate;
			var timezone = (new Date()).getTimezoneOffset();
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/add_event.php", {
				uid: user.uid,
				start_time: st,
				end_time: et,
				event_name: eventdesc,
				timezone: timezone
			},
			function (data) {
				var obj = $.parseJSON(data);
				alert(obj.err);
				$.mobile.pageContainer.pagecontainer("change", "#mainpage", {
					transition: 'none',
					reloadPage: false
				});
			});
		});

		//GENERATE AVAILABILITY REPORT FORM
		$(document).on("pagebeforeshow", "#generateavailreportform", function () {
			$("#generateavailreportheader").empty();
			$("#generateavailreportheader").append(group.gname.toUpperCase() + " Availability Report");
			$("#availrepgroupid").val(group.gid);
		});

		//GENERATE AVAILABILITY BUTTON SUBMIT
		$("#generateavailreportbutton").click(function () {
			var filter5 = 60;
			var gid = $("#availrepgroupid").val();
			var startdate = $("#availrepstartdate").val();
			var enddate = $("#availrependdate").val();
			var starttime = $("#availrepstarttime").val();
			var endtime = $("#availrependtime").val();
			var duration = $("#availrepduration").val();
			/**
				1st = start date
				2nd = end date
				3rd = int corresponding to the hour of the day 1-24 to start meetings after
				4rd = int corresponding to the hour of the day 1-24 to end the meeting before
				5th = int for length of meeting in minutes.
			*/
			var filter1 = new Date(startdate);
			filter1.setDate(filter1.getDate());
			var filter2 = new Date(enddate);
			filter2.setDate(filter2.getDate() + 2);
			var filter3 = parseInt(starttime[0] + starttime[1]);
			if (isNaN(filter3)) {
				filter3 = 8;
			}
			var filter4 = parseInt(endtime[0] + endtime[1]);
			if (isNaN(filter4)) {
				filter4 = 20;
			}
			filter5 = parseInt(duration);

			var filters = new Array(filter1, filter2, filter3, filter4, filter5);
			console.log(filters);
			var gcalendar = new Array();
			$.mobile.loading('show');
			$.ajax({
				type: 'POST',
				url: 'http://server8.ies.cse.ohio-state.edu/stacker/retrieve_group_calendars.php',
				data: {
					gid: gid,
				},
				success: function (data) {
					var obj = $.parseJSON(data);
					var curr_user;
					var i = 0;
					var j = 0;
					var length = obj.length
					for (index = obj.length - 1; index > 0; index = index - 4) {
						// index -> uid
						// index + 1 -> starttime
						// index + 2 -> endtime
						// 
						//console.log(obj[index-2]);
						//console.log(obj[index-1]);
						gcalendar.push(new Date(obj[index - 2].replace(/-/g, "/")));
						gcalendar.push(new Date(obj[index - 1].replace(/-/g, "/")));
					}
				},
				async: false
			});
			console.log(gcalendar);
			console.log("Unsorted");
			//gcalendar.sort();
			var finalcal = new Array(gcalendar, []);
			console.log(finalcal);
			var result = compareCalendars(filters, finalcal);
			$.mobile.loading('hide');
			if (result.length == 0) {
				alert('Sorry, There is no available meeting time for these filters, please try again');
				$.mobile.pageContainer.pagecontainer("change", "#generateavailreportform", {
					transition: 'none',
					reloadPage: false
				});
			} else {
				availreport = [];
				availreport = result;
				console.log(result);
				$.mobile.pageContainer.pagecontainer("change", "#availreportresult", {
					transition: 'none',
					reloadPage: false
				});
			}
		});

		// VIEW AVAILABILITY REPORT
		$(document).on("pagebeforeshow", "#availreportresult", function () {
			$(availreportresultcontainer).empty();
			if (availreport.length == 0) {
				alert("no meeting times available");
			}
			var something = $(" <table data-role='table' data-mode='columntoggle' class='ui-responsive' id='availreporttable'> <thead> <tr> <th>Start Time</th> <th>End Time</th> <th></th> </tr> </thead> <tbody>");
			for (index = 0; index < availreport.length; index++) {
				something2 = $("<tr><td>" + new Date(availreport[index]).toDateString() + " " + new Date(availreport[index]).toLocaleTimeString() + "</td><td>" + new Date(availreport[index + 1]).toDateString() + " " + new Date(availreport[index + 1]).toLocaleTimeString() + "</td><td>" + "<input data-role='button' type='button' class='createmeeting' value='Create' starttime='" + new Date(availreport[index]) + "' endtime='" + new Date(availreport[index + 1]) + "'>" + "</td></tr>");
				$(something).append(something2);
				something3 = $("</tr></tbody> </table>");
				$(something).append(something3);
				something.table();
				$(".createmeeting").button().button("refresh");
				$("#availreportresultcontainer").append(something);
			}

			//CREATE MEETING
			$(".createmeeting").click(function () {
				var st = new Date($(this).attr("starttime")).toMysqlFormat();
				var et = new Date($(this).attr("endtime")).toMysqlFormat();
				var gid = group.gid;
				var meeting_notes = group.gname + " meeting ";
				$.post("http://server8.ies.cse.ohio-state.edu/stacker/add_meeting.php", {
					gid: gid,
					start_time: st,
					end_time: et,
					notes: meeting_notes
				},
				function (data) {
					var obj = $.parseJSON(data);
					console.log(obj);
					//alert(obj);
					$.mobile.pageContainer.pagecontainer("change", "#mainpage", {
						transition: 'none',
						reloadPage: false
					});
				});
			});
		});

		//ADD MEMBER TO GROUP
		$("#addmemberbutton").click(function () {
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/add_member.php", {
				email: $("#addmembervalue").val(),
				gid: group.gid
			},
			function (data) {
				var obj = $.parseJSON(data);
				alert(obj.err);
			});
		});

		//Before Settings
		$(document).on("pagebeforeshow", "#settings", function () {
			$("#settingsname").attr("placeholder","Name: "+user.name);
			$("#settingsstatus").attr("placeholder","Status: "+user.status);
		});
		
		//UPDATE NAME
		$("#updatename").click(function () {
			var name = $("#settingsname").val();
			user.name = name;
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/update_name.php", {
				uid: user.uid,
				name: name,
			},
			function (data) {
				var obj = $.parseJSON(data);
				alert(obj.err);
				$.mobile.pageContainer.pagecontainer("change", "#mainpage", {
					transition: 'none',
					reloadPage: false
				});
			});
		});

		//UPDATE PHONE
		$("#updatephone").click(function () {
			var phone = $("#settingsphone").val();
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/update_phone.php", {
				uid: user.uid,
				phone: phone,
			},
			function (data) {
				var obj = $.parseJSON(data);
				alert(obj.err);
				$.mobile.pageContainer.pagecontainer("change", "#mainpage", {
					transition: 'none',
					reloadPage: false
				});
			});
		});
		
		//UPDATE STATUS
		$("#updatestatus").click(function () {
			var status = $("#settingsstatus").val();
			user.status = status;
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/update_status.php", {
				uid: user.uid,
				status: status
			},
			function (data) {
				var obj = $.parseJSON(data);
				alert(obj.err);
				$.mobile.pageContainer.pagecontainer("change", "#mainpage", {
					transition: 'none',
					reloadPage: false
				});
			});
		});

		//INVITE A FRIEND
		$("#submitinvite").click(function () {
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/invite_friend.php", {
				email: $("#inviteemail").val(),
				invitee: user.name
			},
			function (data) {
				var obj = $.parseJSON(data);
				alert(obj.err);
				$.mobile.pageContainer.pagecontainer("change", "#mainpage", {
					transition: 'none',
					reloadPage: false
				});
			});
		});

		//LOGOUT
		$(document).on("pagebeforeshow", "#logout", function () {
			user.name = null;
			user.uid = null;
			user.session = null;
			$.post("http://server8.ies.cse.ohio-state.edu/stacker/logout.php", {
				session: user.session,
			},
			function (data) {
				var obj = $.parseJSON(data);
				$.mobile.pageContainer.pagecontainer("change", "#welcome", {
					transition: 'none',
					reloadPage: false
				});
			});
		});
	});
	</script>
	<style type="text/css">
		body {
			margin:0;
			padding:0;
			width:100%;
			height:100%;
			display:table;
		}

		.ui-page {
			background: transparent;
		}

		.ui-content{
			background: transparent;
		}

		/* Add alternating row stripes */
		.createmeeting tbody tr:nth-child(odd) td,
		.createmeeting tbody tr:nth-child(odd) th {
			background-color: rgba(0,0,0,0.04);
		}
		/* Add stroke to the header and last item */
		.createmeeting thead th,
		.createmeeting tbody tr:last-child {
			border-bottom: 1px solid rgba(0, 0, 0, .1);
		}
	</style>
</head>
<body>

	<!-- WELCOME PAGE- Contains the  and register -->
	<div data-role="page" id="welcome" style="background: url(img/logo.png); background-repeat:no-repeat; background-position:center top; background-attachment:scroll; background-size:50% 50%;">

		<div data-role="header" data-theme="b">
			<h1>Stacker</h1>
		</div>

		<div data-role="main" class="ui-content" style="position:fixed; top:60%; left:25%">			
			<a href="#login" class="ui-btn ui-btn-inline ui-mini ui-shadow ui-btn-corner-all ui-btn-b">Login</a>
			<a href="#signup" class="ui-btn ui-btn-inline ui-mini ui-shadow ui-btn-corner-all ui-btn-b" >Sign Up</a>
		</div>

		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div> 


	<!-- LOGIN -->
	<div data-role="page" id="login">

		<div data-role="header" data-theme="b" data-position="fixed">
			<h1> Login</h1> <a href="#welcome" class="ui-btn ui-btn-inline ui-mini ui-icon-back ui-btn-icon-left ui-btn-corner-all">Go back</a>
		</div>

		<div data-role="main" class="ui-content" style="position:fixed; top:20%; left:20%; background:#fff; ">
			<div>
				<form id="loginform" action="javascript:void(0);" method="POST">
					<input type="text" id="email" data-mini="true" placeholder="Username"></input>
					<input type="password" id="password" data-mini="true" placeholder="Password"></input>
					<input type="submit" id="submitlogin" value="submit" data-theme="b"/>
				</form>
			</div>
		</div>
			  
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div> 


	<!-- SIGNUP -->
	<div data-role="page" id="signup">
		
		<div data-role="header" data-theme="b">
			<h1>Sign Up</h1> <a href="#welcome" class="ui-btn ui-btn-inline ui-mini ui-icon-back ui-btn-icon-left ui-btn-corner-all">Go back</a>
		</div>

		<div data-role="main" class="ui-content" style="position:fixed; top:20%; left:20%; background:#fff; ">
			<div>
				<form id="regform" action="javascript:void(0);" method="POST">
					<input type="text" id="regname" data-mini="true" placeholder="Name"></input>
					<input type="text" id="regemail" data-mini="true" placeholder="Email"></input>
					<input type="text" id="regpassword" data-mini="true" placeholder="Password"></input>
					<input type="text" id="regphone" data-mini="true" placeholder="Phone #"></input>
					<input type="submit" id="submitreg" value="submit" data-theme="b"/>
				</form>
			</div>
		</div>
			  
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div> 
	
	
	<!-- MAINPAGE -->
	<div data-role="page" id="mainpage">
			
		<div data-role="header" data-theme="b">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a data-icon="home" class="ui-active  ui-state-persist">Home</a></li>
					<li><a href="#view-calendar" data-icon="grid">Calendar</a></li>
					<li><a href="#settings" data-icon="gear">Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>

		<!--Main Page Design -->
		<div data-role="main" class="ui-content" style="margin:0 auto; background:#fff;">
			<div class="ui-grid-a">	     
				<a href="#creategroup" data-role="button" data-mini="true">Create Group</a>
				<a href="#mygroups" data-role="button" data-mini="true">My Groups</a>
				<a href="#managecalendars" data-role="button" data-mini="true">Manage Calendars</a>
				<a href="#addcalendarevent" data-role="button" data-mini="true">New Calendar Event</a>
				<a href="#notifications" data-role="button" data-mini="true">Notifications</a>
				<a href="#invite" data-role="button" data-mini="true">Invite a Friend</a>
			</div>		 
		</div>
			  
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div> 


	<!-- CREATE GROUP -->
	<div data-role="page" id="creategroup">

		<div data-role="header" data-theme="b">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mainpage"  data-icon="back">Back</a></li>
					<li><a href="#view-calendar" data-icon="calendar">Calendar</a></li>
					<li><a href="#settings" data-icon="gear">Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>

		<!--Create Group Design -->
		<div data-role="main" class="ui-content" style="background:#fff;">
			<div class="ui-grid-a">
				<div class="ui-block-a">
					<h4>Create Group </h4>
				</div>
			</div>
			<form id="creategroupform" action="javascript:void(0);" method="POST" data-mini="true">
				<input type="text" id="creategroupname" data-mini="true" placeholder="Group Name"></input>
				</br>
				<input type="text" id="creategroupmem1" data-mini="true" placeholder="Member 1:"></input>
				<input type="text" id="creategroupmem2" data-mini="true" placeholder="Member 2:"></input>
				<input type="text" id="creategroupmem3" data-mini="true" placeholder="Member 3:"></input>		
				<input type="text" id="creategroupmem4" data-mini="true" placeholder="Member 4:"></input>							 
				<input type="submit" id="submitcreategroup" value="submit" data-theme="b" data-mini="true"/>
			</form>
		</div>
			  
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div> 


	<!-- GENERATE AVAILABILITY REPORT FORM -->
	<div data-role="page" id="generateavailreportform">
			
		<div data-role="header" data-theme="b" data-position="fixed">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mygroups"  data-icon="back">Back</a></li>
					<li><a href="#view-calendar" data-icon="calendar">Calendar</a></li>
					<li><a href="#settings" data-icon="gear">Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>
				
		<!--Generate Avail report Design -->
		<div data-role="main" class="ui-content" style="background:#fff;  margin-top:2%;">
			<div id="generateavailreportheader"></div>
			<form id="generateavailreportform" action="javascript:void(0);" data-mini="true">
				<input type="hidden" id="availrepgroupid"></input>	
				<h5>Meeting Start Date:</h5><input type="date" id="availrepstartdate" data-mini="true" value="2013-01-01"></input>
				<h5>Meeting Start Time:</h5><input type="time" id="availrepstarttime" data-mini="true" ></input>
				<h5>Meeting End Date:</h5><input type="date" id="availrependdate" data-mini="true" value="2016-01-01"></input>
				<h5>Meeting End Time:</h5><input type="time" id="availrependtime" data-mini="true" ></input>
				<h5>Duration:</h5><input type="number" id="availrepduration" data-mini="true" placeholder="min"></input>
				<input type="submit" id="generateavailreportbutton" data-mini="true" value="Generate Report"></input>		
			</form>
		</div>
			  
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div> 


	<!-- AVAILABILITY REPORT  -->
	<div data-role="page" id="availreportresult">
			
		<div data-role="header" data-theme="b" data-position="fixed">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mygroups"  data-icon="back">Back</a></li>
					<li><a href="#view-calendar" data-icon="calendar">Calendar</a></li>
					<li><a href="#settings" data-icon="gear">Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>


		<!--Avail report -->
		<div data-role="main" class="ui-content" style="background:#fff;  margin-top:2%;">
			<div id="availreportresultcontainer"></div>
		</div>
			  
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div> 


	<!-- ADD CALENDAR EVENT FORM -->
	<div data-role="page" id="addcalendarevent">
			
		<div data-role="header" data-theme="b">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mainpage"  data-icon="home">Home</a></li>
					<li><a href="#view-calendar" data-icon="calendar">Calendar</a></li>
					<li><a href="#settings" data-icon="gear">Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>
				
		<!--Generate Avail report Design -->
		<div data-role="main" class="ui-content" style="background:#fff;  margin-top:2%;">
			<form id="addcalendareventform" action="javascript:void(0);" data-mini="true">	
				<div data-role="fieldcontain">
					<input type="text" id="caleventdesc" Placeholder="Description"></input>	
				</div>
				From:<input type="date" id="caleventstartdate" data-inline="true" data-mini="true" value="2013-01-01"></input>
				Time:<input type="time" id="caleventstarttime" data-mini="true" ></input>
				To:<input type="date" id="caleventenddate" data-mini="true" value="2016-01-01"></input>
				Time:<input type="time" id="caleventendtime" data-mini="true" ></input>
				<input type="submit" id="addcalendareventbutton" data-mini="true" data-theme="b" value="Create Event"></input>						
			</form>
		</div>
	</div>


	<!-- MANAGE CALENDARS -->
	<div data-role="page" id="managecalendars">
      
		<div data-role="header" data-theme="b">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mainpage"  data-icon="home">Home</a></li>
					<li><a href="#view-calendar" data-icon="grid" class="ui-active  ui-state-persist">Calendars</a></li>
					<li><a href="#settings" data-icon="gear" >Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>

		<div data-role="main" class="ui-content" style="background:#fff;  margin-top:2%;">
			<div>
				<h1>Synced Calendars</h1>
			</div>
			<table id="mancalendarlist"></table>
			<button id="authgooglecalendar">Authorize Google Calendar Access</button>
			<button id="syncgooglecalendars">Synchronize Calendar Events</button>
		</div>
        
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div>


	<!-- MY CALENDAR -->
	<div data-role="page" id="view-calendar" data-theme="a">

		<div data-role="header" data-theme="b">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mainpage"  data-icon="home">Home</a></li>
					<li><a href="#view-calendar" data-icon="grid" class="ui-active  ui-state-persist">Calendar</a></li>
					<li><a href="#settings" data-icon="gear" >Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>

		<div data-role="content">
			<div id="calendar"></div>
		</div>
	</div>


	<!-- MY GROUPS -->
	<div data-role="page" id="mygroups">
			
		<div data-role="header" data-theme="b" data-position="fixed">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mainpage"  data-icon="home">Home</a></li>
					<li><a href="#view-calendar" data-icon="calendar">Calendar</a></li>
					<li><a href="#settings" data-icon="gear">Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>
				
		<!--My Groups Design -->
		<div data-role="main" class="ui-content" style="font-size:8px; margin-top:2%;">
			<div id="viewgroups" class="overnone-y:scroll; margin:3px;"></div>
		</div>
			  
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div> 


	<!-- MANAGE GROUPS -->
	<div data-role="page" id="managegroups">
			
		<div data-role="header" data-theme="b" data-position="fixed">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mygroups"  data-icon="back">Back</a></li>
					<li><a href="#view-calendar" data-icon="calendar">Calendar</a></li>
					<li><a href="#settings" data-icon="gear">Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>
				
		<!--Manage groups Design -->
		<div data-role="main" class="ui-content" style="background:#fff;">
			<div id="groupmembers"></div>
			<div class="ui-grid-b" id="addmemberwrapper">
				<div class="ui-block-a">
					<input type="text" Placeholder="Email" id="addmembervalue" data-mini="true"/>
				</div>
				<div class="ui-block-b">
					<input type="button" value="Add Member" data-mini="true" data-icon="plus" id="addmemberbutton" class="ui-btn ui-btn-inline ui-btn-icon-notext"/>
				</div>
				<div class="ui-block-c"></div>
			</div>
		</div>
			  
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div>


	<!-- VIEW GROUP CALENDAR -->
	<div data-role="page" id="view-group-calendar" data-theme="a">

		<div data-role="header" data-theme="b">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mygroups"  data-icon="back">Back</a></li>
					<li><a href="#view-calendar" data-icon="grid" class="ui-active  ui-state-persist">Calendar</a></li>
					<li><a href="#settings" data-icon="gear" >Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>

		<div data-role="content">
			<div id="groupcalendar"></div>
		</div>
	</div>

	<!-- NOTIFICATIONS -->
	<div data-role="page" id="notifications">
			
		<div data-role="header" data-theme="b" data-position="fixed">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mainpage"  data-icon="back">Back</a></li>
					<li><a href="#view-calendar" data-icon="calendar">Calendar</a></li>
					<li><a href="#settings" data-icon="gear">Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>
				
		<!-- Notifications Main Design -->
		<div data-role="main" class="ui-content" style="background:#fff; font-size:10px; margin-top:2%;">
			<div id="groupnotifications"></div>
		</div>
			  
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div> 


	<!-- SETTINGS -->
	<div data-role="page" id="settings">
			
		<div data-role="header" data-theme="b">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mainpage"  data-icon="home">Home</a></li>
					<li><a href="#view-calendar" data-icon="grid">Calendar</a></li>
					<li><a href="#settings" data-icon="gear" class="ui-active  ui-state-persist">Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>

		<div data-role="main" class="ui-content" style="margin:50px 50px; background:#fff; ">
			<div class="ui-grid-a">
				<div class="ui-block-a">
					<input type="text" id="settingsname" data-mini="true" placeholder="Name"></input>
				</div>
				<div class="ui-block-b">
					<button id="updatename" class="ui-btn ui-btn-inline ui-btn-mini ui-btn-icon-right ui-icon-edit ui-btn-corner-all">Update</button>
				</div>
			</div>
			<div class="ui-grid-a">
				<div class="ui-block-a">
					<input type="text" id="settingsphone" data-mini="true" placeholder="Phone"></input>
				</div>
				<div class="ui-block-b">
					<button id="updatephone" class="ui-btn ui-btn-inline ui-btn-mini ui-btn-icon-right ui-icon-edit ui-btn-corner-all">Update</button>
				</div>
			</div>
			<div class="ui-grid-a">
				<div class="ui-block-a">
					<input type="text" id="settingsstatus" data-mini="true" placeholder="Status"></input>
				</div>
				<div class="ui-block-b">
					<button id="updatestatus" class="ui-btn ui-btn-inline ui-btn-mini ui-btn-icon-right ui-icon-edit ui-btn-corner-all">Update</button>
				</div>
			</div>
		</div>

		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div>


	<!-- INVITE A FRIEND -->
	<div data-role="page" id="invite">
			
		<div data-role="header" data-theme="b">
			<div data-role="navbar" id="mainnavbar" data-theme="a">
				<ul>
					<li><a href="#mainpage"  data-icon="home">Home</a></li>
					<li><a href="#view-calendar" data-icon="grid">Calendars</a></li>
					<li><a href="#settings" data-icon="gear" >Settings</a></li>
					<li><a href="#logout" data-icon="power">Logout</a></li>
				</ul>
			</div>
		</div>

		<div data-role="main" class="ui-content" style="margin-top:5%; margin-left:5%; background:#fff; ">
			Tell A Friend About Stacker!!!
			</br>
			</br>
			<form id="inviteform" action="javascript:void(0);" method="POST">
				<input type="text" id="inviteemail" data-mini="true" placeholder="Email"></input>
				<input type="submit" id="submitinvite" value="Invite" data-theme="b"/>
			</form>
		</div>
			  
		<div data-role="footer" data-position="fixed" data-theme="b">
			<h1>&copy; Stacker Team</h1>
		</div>
	</div> 

	<div id="refreshgroups">
	</div>

	<div id="refreshnotifications">
	</div>

	<div id="refreshcalendar">
	</div>

	<div id="refreshmanagegroups">
	</div>

	<div id="refreshmanagecalendars">
	</div>

	<div id="logout">
	</div>
</body>
</html>
